{"version":3,"sources":["panels/Home.js","App.js","index.js"],"names":["Home","state","adult","q","contextOpened","searchVideo","event","key","_this","props","loading","connect","send","method","params","v","access_token","data","token","toggleContext","setState","_this2","this","react_default","a","createElement","vkui","id","aside","dropdown_default","onClick","opened","onClose","onChange","checked","value","onKeyPress","style","marginTop","sR","items","map","item","oid","owner_id","href","concat","src","photo_130","alt","width","valign","textDecoration","color","textOverflow","title","React","Component","App","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","go","e","activePanel","currentTarget","dataset","to","cookies","fetchedUser","get","console","subscribe","detail","type","set","path","response","app_id","scope","panels_Home","align","withCookies","ReactDOM","render","es6","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.42ae9f2d.chunk.js","sourcesContent":["import React from 'react';\nimport { Panel, PanelHeader, Checkbox, Search, PanelHeaderContent, Cell, List, HeaderContext, Footer, Spinner } from '@vkontakte/vkui';\nimport Icon16Dropdown from '@vkontakte/icons/dist/16/dropdown';\n\nclass Home extends React.Component {\n\n\tstate = {\n\t\tadult: 0,\n\t\tq: null,\n\t\tcontextOpened: false\n\t};\n\n\tsearchVideo = event => {\n\t\tif (event.key === 'Enter') {\n\t\t\tthis.props.loading();\n\t\t\tthis.props.connect.send(\"VKWebAppCallAPIMethod\", {\"method\": \"video.search\", \"params\": {\"q\": this.state.q, \"adult\": this.state.adult, \"v\":\"5.95\", \"access_token\":this.props.data.token}});\n\t\t}\n\t};\n\n\ttoggleContext = () => {\n\t\tthis.setState({ contextOpened: !this.state.contextOpened });\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<Panel id={this.props.id}>\n\t\t\t\t<PanelHeader>\n\t\t\t\t\t<PanelHeaderContent aside={<Icon16Dropdown />} onClick={this.toggleContext}>\n\t\t\t\t\t\tВидео\n\t\t\t\t\t</PanelHeaderContent>\n\t\t\t\t</PanelHeader>\n\t\t\t\t<HeaderContext opened={this.state.contextOpened} onClose={this.toggleContext}>\n\t\t\t\t\t<List>\n\t\t\t\t\t\t<Cell>\n\t\t\t\t\t\t\t<Checkbox onChange={()=>{this.setState({adult: 1 - this.state.adult%2})}} checked={!this.state.adult}>Безопасный поиск</Checkbox>\n\t\t\t\t\t\t</Cell>\n\t\t\t\t\t</List>\n\t\t\t\t</HeaderContext>\n\t\t\t\t<Search onChange={(value)=>{this.setState({q:value})}} value={this.state.q} onKeyPress={this.searchVideo}/>\n\t\t\t\t{this.props.data.loading ?\n\t\t\t\t\t<Spinner style={{marginTop: 15}}/>:null}\n\t\t\t\t<List>\n\t\t\t\t{this.props.data.sR ?\n\t\t\t\t\tthis.props.data.sR.items.map((item,key)=>{\n\t\t\t\t\t\tconst oid = item.owner_id;\n\t\t\t\t\t\tconst id = item.id;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Cell key={key}>\n\t\t\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t<a href={`https://vk.com/video${oid}_${id}`}><img src={\n\t\t\t\t\t\t\t\t\t\t\t\titem.photo_130\n\t\t\t\t\t\t\t\t\t\t\t} alt=\"pic\" style={{width: 140}} /></a>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td style={{width:'70%'}} valign=\"top\">\n\t\t\t\t\t\t\t\t\t\t\t<a href={`https://vk.com/video${oid}_${id}`} style={{textDecoration: \"none\",color: 'black', textOverflow: 'ellipsis'}}>{item.title}</a>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t)\n\t\t\t\t\t}):null}\n\t\t\t\t</List>\n\n\t\t\t\t<Footer>Посик видео</Footer>\n\t\t\t</Panel>\n\t\t)\n\t}\n}\n\nexport default Home;\n","import React from 'react';\nimport connect from '@vkontakte/vkui-connect';\nimport { View } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport { withCookies, Cookies } from 'react-cookie';\nimport { instanceOf } from 'prop-types';\n\nimport Home from './panels/Home';\n\n\nclass App extends React.Component {\n\n\tstatic propTypes = {\n\t\tcookies: instanceOf(Cookies).isRequired\n\t};\n\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tconst { cookies } = props;\n\t\tthis.state = {\n\t\t\tactivePanel: 'home',\n\t\t\tfetchedUser: null,\n\t\t\ttoken: cookies.get('userToken'),\n\t\t\tconsole: null,\n\t\t\tsR: null,\n\t\t\tloading: false,\n\t\t};\n\t}\n\n\tloading = () => {\n\t\tthis.setState({loading: !this.state.loading})\n\t};\n\n\tcomponentDidMount() {\n\t\tconnect.subscribe((e) => {\n\t\t\tswitch (e.detail.type) {\n\t\t\t\tcase 'VKWebAppGetUserInfoResult':\n\t\t\t\t\tthis.setState({ fetchedUser: e.detail.data });\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'VKWebAppAccessTokenReceived':\n\t\t\t\t\tconst { cookies } = this.props;\n\t\t\t\t\tcookies.set('userToken', e.detail.data.access_token, { path: '/' });\n\n\t\t\t\t\tthis.setState({token: e.detail.data.access_token});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'VKWebAppCallAPIMethodResult':\n\t\t\t\t\tthis.setState({sR: e.detail.data.response});\n\t\t\t\t\tthis.loading();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.setState({console: e.detail.type})\n\t\t\t}\n\t\t});\n\n\t\tif (!this.state.token) {\n\t\t\tconnect.send(\"VKWebAppGetAuthToken\", {\"app_id\": 6960579, \"scope\": \"friends,video\"})\n\t\t}\n\n\t\tconnect.send('VKWebAppGetUserInfo', {});\n\t}\n\n\n\n\n\tgo = (e) => {\n\t\tthis.setState({ activePanel: e.currentTarget.dataset.to })\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\tthis.state.fetchedUser ?\n\t\t\t\t\t<View activePanel={this.state.activePanel}>\n\t\t\t\t\t\t<Home id=\"home\" data={this.state} go={this.go} connect={connect} loading={this.loading}/>\n\t\t\t\t\t</View>:\n\t\t\t\t<h1 align=\"center\">Unsupported device!</h1>\n\n\n\t\t);\n\t}\n}\n\nexport default withCookies(App);\n","import 'core-js/es6/map';\nimport 'core-js/es6/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vkui-connect';\nimport { CookiesProvider } from 'react-cookie';\nimport App from './App';\n// import registerServiceWorker from './sw';\n\n// Init VK App\nconnect.send('VKWebAppInit', {});\n\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\n// расскомментируйте строку с registerServiceWorker();\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT \n// registerServiceWorker();\n\nReactDOM.render(\n    <CookiesProvider>\n        <App />\n    </CookiesProvider>,\n    document.getElementById('root'));\n"],"sourceRoot":""}