(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{115:function(e,t,a){"use strict";a.r(t);a(63),a(88);var n=a(0),o=a.n(n),l=a(39),s=a.n(l),c=a(10),r=a.n(c),i=a(26),d=a(23),p=a(24),u=a(27),h=a(25),m=a(28),b=a(1),k=(a(114),a(61)),f=a.n(k),g=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={adult:0,q:null,contextOpened:!1},a.searchVideo=function(e){"Enter"===e.key&&(a.props.loading(),a.props.connect.send("VKWebAppCallAPIMethod",{method:"video.search",params:{q:a.state.q,adult:a.state.adult,v:"5.95",access_token:a.props.data.token}}))},a.toggleContext=function(){a.setState({contextOpened:!a.state.contextOpened})},a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(b.Panel,{id:this.props.id},o.a.createElement(b.PanelHeader,null,o.a.createElement(b.PanelHeaderContent,{aside:o.a.createElement(f.a,null),onClick:this.toggleContext},"\u0412\u0438\u0434\u0435\u043e")),o.a.createElement(b.HeaderContext,{opened:this.state.contextOpened,onClose:this.toggleContext},o.a.createElement(b.List,null,o.a.createElement(b.Cell,null,o.a.createElement(b.Checkbox,{onChange:function(){e.setState({adult:1-e.state.adult%2})},checked:!this.state.adult},"\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u044b\u0439 \u043f\u043e\u0438\u0441\u043a")))),o.a.createElement(b.Search,{onChange:function(t){e.setState({q:t})},value:this.state.q,onKeyPress:this.searchVideo}),this.props.data.loading?o.a.createElement(b.Spinner,{style:{marginTop:15}}):null,o.a.createElement(b.List,null,this.props.data.sR?this.props.data.sR.items.map(function(e,t){var a=e.owner_id,n=e.id;return o.a.createElement(b.Cell,{key:t},o.a.createElement("table",null,o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("a",{href:"https://vk.com/video".concat(a,"_").concat(n)},o.a.createElement("img",{src:e.photo_130,alt:"pic",style:{width:140}}))),o.a.createElement("td",{style:{width:"70%"},valign:"top"},o.a.createElement("a",{href:"https://vk.com/video".concat(a,"_").concat(n),style:{textDecoration:"none",color:"black",textOverflow:"ellipsis"}},e.title)))))}):null),o.a.createElement(b.Footer,null,"\u041f\u043e\u0441\u0438\u043a \u0432\u0438\u0434\u0435\u043e"))}}]),t}(o.a.Component),v=function(e){function t(e){var a;Object(d.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).loading=function(){a.setState({loading:!a.state.loading})},a.go=function(e){a.setState({activePanel:e.currentTarget.dataset.to})};var n=e.cookies;return a.state={activePanel:"home",fetchedUser:null,token:n.get("userToken"),console:null,sR:null,loading:!1},a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;r.a.subscribe(function(t){switch(t.detail.type){case"VKWebAppGetUserInfoResult":e.setState({fetchedUser:t.detail.data});break;case"VKWebAppAccessTokenReceived":e.props.cookies.set("userToken",t.detail.data.access_token,{path:"/"}),e.setState({token:t.detail.data.access_token});break;case"VKWebAppCallAPIMethodResult":e.setState({sR:t.detail.data.response}),e.loading();break;default:e.setState({console:t.detail.type})}}),this.state.token||r.a.send("VKWebAppGetAuthToken",{app_id:6960579,scope:"friends,video"}),r.a.send("VKWebAppGetUserInfo",{})}},{key:"render",value:function(){return this.state.fetchedUser?o.a.createElement(b.View,{activePanel:this.state.activePanel},o.a.createElement(g,{id:"home",data:this.state,go:this.go,connect:r.a,loading:this.loading})):o.a.createElement("h1",{align:"center"},"Unsupported device!")}}]),t}(o.a.Component),E=Object(i.b)(v);r.a.send("VKWebAppInit",{}),s.a.render(o.a.createElement(i.a,null,o.a.createElement(E,null)),document.getElementById("root"))},62:function(e,t,a){e.exports=a(115)}},[[62,1,2]]]);
//# sourceMappingURL=main.42ae9f2d.chunk.js.map