{"version":3,"sources":["panels/Home.js","App.js","index.js"],"names":["Home","state","adult","q","contextOpened","hd","longer","count","searchVideo","event","key","_this","props","updateHistory","loading","connect","send","method","params","v","access_token","data","token","toggleContext","setState","console","log","this","history","_this2","react_default","a","createElement","vkui","id","aside","dropdown_default","onClick","opened","onClose","onChange","checked","value","onKeyPress","style","marginTop","sR","items","map","item","oid","owner_id","href","concat","src","photo_130","alt","width","valign","overflow","textOverflow","marginBottom","textSize","title","color","description","noshade","size","margin","marginLeft","display","React","Component","App","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","vall","cookies","push","set","path","go","e","activePanel","currentTarget","dataset","to","fetchedUser","get","Array","subscribe","detail","type","response","app_id","scope","panels_Home","align","withCookies","ReactDOM","render","es6","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.9a00e696.chunk.js","sourcesContent":["import React from 'react';\nimport { Panel, PanelHeader, Checkbox, Search, PanelHeaderContent, Cell, List, HeaderContext, Footer, Spinner } from '@vkontakte/vkui';\nimport Icon16Dropdown from '@vkontakte/icons/dist/16/dropdown';\n\nclass Home extends React.Component {\n\n\tcomponentDidMount() {\n\t\tconsole.log(this.props.data.history)\n\t}\n\n\tstate = {\n\t\tadult: 0,\n\t\tq: '',\n\t\tcontextOpened: false,\n\t\thd: 0,\n\t\tlonger: 0,\n\t\tcount: 10\n\t};\n\n\tsearchVideo = event => {\n\t\tif (event.key === 'Enter') {\n\t\t\t// Keyboard.dismiss();\n\t\t\tthis.props.updateHistory(this.state.q);\n\t\t\tthis.props.loading();\n\t\t\tthis.props.connect.send(\"VKWebAppCallAPIMethod\", {\"method\": \"video.search\", \"params\": {\"hd\":this.state.hd,\"longer\":this.state.longer,\"count\":this.state.count,\"q\": this.state.q, \"adult\": this.state.adult, \"v\":\"5.95\", \"access_token\":this.props.data.token}});\n\t\t}\n\t};\n\n\ttoggleContext = () => {\n\t\tthis.setState({ contextOpened: !this.state.contextOpened });\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<Panel id={this.props.id}>\n\t\t\t\t<PanelHeader>\n\t\t\t\t\t<PanelHeaderContent aside={<Icon16Dropdown />} onClick={this.toggleContext}>\n\t\t\t\t\t\tВидео\n\t\t\t\t\t</PanelHeaderContent>\n\t\t\t\t</PanelHeader>\n\t\t\t\t<HeaderContext opened={this.state.contextOpened} onClose={this.toggleContext}>\n\t\t\t\t\t<List>\n\t\t\t\t\t\t<Cell>\n\t\t\t\t\t\t\t<Checkbox onChange={()=>{this.setState({adult: 1 - this.state.adult%2})}} checked={!this.state.adult}>Безопасный поиск</Checkbox>\n\t\t\t\t\t\t\t<Checkbox onChange={()=>{this.setState({hd: 1 - this.state.hd%2})}} checked={this.state.hd}>Только высокое качество</Checkbox>\n\t\t\t\t\t\t\t<Checkbox onChange={()=>{this.setState({longer: this.state.longer === 0? 600: 0})}} checked={(this.state.longer - this.state.longer%600)/600}>Только длинные</Checkbox>\n\t\t\t\t\t\t</Cell>\n\t\t\t\t\t</List>\n\t\t\t\t</HeaderContext>\n\t\t\t\t<Search onChange={(value)=>{this.setState({q:value})}} value={this.state.q} onKeyPress={this.searchVideo}/>\n\t\t\t\t{this.props.data.loading ?\n\t\t\t\t\t<Spinner style={{marginTop: 15}}/>:null}\n\t\t\t\t<List>\n\t\t\t\t{this.props.data.sR ?\n\t\t\t\t\tthis.props.data.sR.items.map((item,key)=>{\n\t\t\t\t\t\tconst oid = item.owner_id;\n\t\t\t\t\t\tconst id = item.id;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<a href={`https://vk.com/video${oid}_${id}`}>\n\t\t\t\t\t\t\t<Cell key={key}>\n\t\t\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t<img src={\n\t\t\t\t\t\t\t\t\t\t\t\titem.photo_130\n\t\t\t\t\t\t\t\t\t\t\t} alt=\"pic\" style={{width: 140}} />\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td style={{width:'70%'}} valign=\"top\">\n\t\t\t\t\t\t\t\t\t\t\t{/*<a href={`https://vk.com/video${oid}_${id}`} style={{textDecoration: \"none\",color: 'black', textOverflow: 'ellipsis'}}>{item.title}</a>*/}\n\t\t\t\t\t\t\t\t\t\t\t<p style={{overflow: 'hidden',textOverflow: 'ellipsis', width: 240, marginTop: 0, marginBottom:4, textSize: 15}}>{item.title}</p>\n\t\t\t\t\t\t\t\t\t\t\t<p style={{overflow: 'hidden',textOverflow: 'ellipsis', width: 240, marginTop: 0, textSize: 11, color:'#939393'}}>{item.description}</p>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t\t\t<hr noshade size=\"1\" style={{margin:0, marginLeft: 8, display: 'none'}}/>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t)\n\t\t\t\t\t}):\n\t\t\t\tthis.props.data.history? this.props.data.history.map((item,key)=>(\n\t\t\t\t\t<Cell key={key}>{item}</Cell>\n\t\t\t\t)):null\n\t\t\t\t}\n\t\t\t\t</List>\n\n\t\t\t\t<Footer>Посик видео</Footer>\n\t\t\t</Panel>\n\t\t)\n\t}\n}\n\nexport default Home;\n","import React from 'react';\nimport connect from '@vkontakte/vkui-connect';\nimport { View } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport { withCookies, Cookies } from 'react-cookie';\nimport { instanceOf } from 'prop-types';\n\nimport Home from './panels/Home';\n\n\nclass App extends React.Component {\n\n\tstatic propTypes = {\n\t\tcookies: instanceOf(Cookies).isRequired\n\t};\n\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tconst { cookies } = props;\n\t\tthis.state = {\n\t\t\tactivePanel: 'home',\n\t\t\tfetchedUser: null,\n\t\t\ttoken: cookies.get('userToken'),\n\t\t\tconsole: null,\n\t\t\tsR: null,\n\t\t\tloading: false,\n\t\t\thistory: cookies.get('history')? Array(cookies.get('history')): []\n\t\t};\n\t}\n\n\tupdateHistory = (vall) => {\n\t\tconst { cookies } = this.props;\n\t\tthis.state.history.push(vall);\n\t\tcookies.set('history', this.state.history, { path: '/' });\n\t\tconsole.log(this.state.history)\n\t};\n\tloading = () => {\n\t\tthis.setState({loading: !this.state.loading})\n\t};\n\n\tcomponentDidMount() {\n\t\tconnect.subscribe((e) => {\n\t\t\tswitch (e.detail.type) {\n\t\t\t\tcase 'VKWebAppGetUserInfoResult':\n\t\t\t\t\tthis.setState({ fetchedUser: e.detail.data });\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'VKWebAppAccessTokenReceived':\n\t\t\t\t\tconst { cookies } = this.props;\n\t\t\t\t\tcookies.set('userToken', e.detail.data.access_token, { path: '/' });\n\n\t\t\t\t\tthis.setState({token: e.detail.data.access_token});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'VKWebAppCallAPIMethodResult':\n\t\t\t\t\tthis.setState({sR: e.detail.data.response});\n\t\t\t\t\tthis.loading();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.setState({console: e.detail.type})\n\t\t\t}\n\t\t});\n\n\t\tif (!this.state.token) {\n\t\t\tconnect.send(\"VKWebAppGetAuthToken\", {\"app_id\": 6960579, \"scope\": \"friends,video\"})\n\t\t}\n\n\t\tconnect.send('VKWebAppGetUserInfo', {});\n\t}\n\n\n\n\n\tgo = (e) => {\n\t\tthis.setState({ activePanel: e.currentTarget.dataset.to })\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\tthis.state.fetchedUser ?\n\t\t\t\t\t<View activePanel={this.state.activePanel}>\n\t\t\t\t\t\t<Home id=\"home\" data={this.state} go={this.go} connect={connect} loading={this.loading} updateHistory={this.updateHistory}/>\n\t\t\t\t\t</View>:\n\t\t\t\t<h1 align=\"center\">Unsupported device!</h1>\n\n\n\t\t);\n\t}\n}\n\nexport default withCookies(App);\n","import 'core-js/es6/map';\nimport 'core-js/es6/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vkui-connect';\nimport { CookiesProvider } from 'react-cookie';\nimport App from './App';\n// import registerServiceWorker from './sw';\n\n// Init VK App\nconnect.send('VKWebAppInit', {});\n\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\n// расскомментируйте строку с registerServiceWorker();\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT \n// registerServiceWorker();\n\nReactDOM.render(\n    <CookiesProvider>\n        <App />\n    </CookiesProvider>,\n    document.getElementById('root'));\n"],"sourceRoot":""}